<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">

<select id="selectMember" resultType="map">
	SELECT * FROM MEMBER
</select> 

<select id="selectMemberById" resultMap="memberMap" parameterType="member">
	SELECT * FROM MEMBER WHERE MEM_EMAIL=#{memEmail}
</select>

<select id="selectMemberByNick" resultMap="memberMap" parameterType="member">
	SELECT * FROM MEMBER WHERE MEM_NICKNAME=#{memNickname}
</select>

<select id="selectMemberByPhone" resultMap="memberMap" parameterType="member">
	SELECT * FROM MEMBER WHERE TEL=#{tel}
</select>

<insert id="signUpEnd" parameterType="member">
	INSERT INTO MEMBER VALUES(SEQ_MEMBER_NO.NEXTVAL, #{memEmail}, #{memPwd}, #{memName}, #{memNickname}, #{gender}, 
		#{birthday,jdbcType=DATE}, DEFAULT, DEFAULT, DEFAULT, DEFAULT, #{memClass}, DEFAULT, #{tel})
</insert>

<insert id="signUpExpert" parameterType="license">
	INSERT INTO LICENSE VALUES(#{licenseMemUsid}, #{licenseFileName}, #{licenseDate}, #{licenseType}, #{licenseCompany})
	<selectKey keyProperty="licenseMemUsid" resultType="_int" order="BEFORE">
		SELECT SEQ_MEMBER_NO.CURRVAL FROM DUAL
	</selectKey>
</insert>

<resultMap id="memberMap" type="member">
	<result property="usid" column="usid"/>
	<result property="memEmail" column="mem_email"/>
	<result property="memPwd" column="mem_pwd"/>
	<result property="memName" column="mem_name"/>
	<result property="memNickname" column="mem_nickname"/>
	<result property="gender" column="gender"/>
	<result property="birthday" column="birthday"/>
	<result property="enrollDate" column="enroll_date"/>
	<result property="point" column="point"/>
	<result property="leaveMem" column="leave_mem"/>
	<result property="pwIsUuid" column="pw_is_uuid"/>
	<result property="memClass" column="mem_class"/>
	<result property="profilePic" column="profile_pic"/>
	<result property="tel" column="tel"/>
</resultMap>

</mapper>